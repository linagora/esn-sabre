server {
  listen 80;
  listen [::]:80 default_server ipv6only=on;

  root /var/www;

  server_name _;

  location / {
    add_header 'Access-Control-Allow-Origin' "$http_origin" always;
    add_header 'Access-Control-Allow-Methods' 'GET, POST, PUT, DELETE, PROPFIND, REPORT, PROPPATCH, ITIP, ACL, PATCH, MOVE' always;
    add_header 'Access-Control-Allow-Headers' 'Depth, Authorization, Content-Type, Accept, Prefer, If-Match, ESNToken, X-Http-Method-Override, Destination, Overwrite, ESNToken' always;
    add_header 'Access-Control-Expose-Headers' 'ETag' always;
    add_header 'Access-Control-Allow-Credentials' 'true' always;
    add_header 'Vary' 'Origin' always;

    if ($request_method = 'OPTIONS') {
        return 200;
    }

    fastcgi_pass unix:/var/run/php/php7.0-fpm.sock;
    include fastcgi_params;
    fastcgi_param SCRIPT_FILENAME /var/www/esn.php;
    fastcgi_read_timeout 120s;
    proxy_http_version 1.1;

    # _auth_basic_
  }
}
